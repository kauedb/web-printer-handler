apply plugin: 'java'
apply plugin: 'idea'

sourceCompatibility = 1.8
version = '1.0'

buildscript {
    repositories {
        jcenter()
    }

    dependencies {
        classpath 'de.gliderpilot.gradle.jnlp:gradle-jnlp-plugin:+'
    }
}

apply plugin: 'de.gliderpilot.jnlp'

repositories {
    mavenCentral()
    flatDir {
        dirs '/opt/java/jdk1.8.0_11/jre/lib/'
    }
}

dependencies {

    compile name: 'javaws'

    testCompile group: 'junit', name: 'junit', version: '4.11'
}


jnlp {
    useVersions = true
    withXml {
        information {
            title project.name
            vendor project.group ?: project.name
        }
        security {
            'all-permissions'()
        }
        'applet-desc'('main-class': 'br.com.kauedb.web_printer_handler.PrinterApplication')
    }
    signJarParams = [alias: 'myalias', storepass: 'mystorepass']
}

task genkey << {
    ant.genkey(alias: 'myalias', storepass: 'mystorepass', dname: 'CN=Ant Group, OU=Jakarta Division, O=Apache.org, C=US')
}

task localDeploy(type: Copy) {
//    from("$buildDir/tmp/jnlp/") {
//        exclude("lib")
//    }
    from "$buildDir/tmp/jnlp/lib"
    into "integration-test"
}